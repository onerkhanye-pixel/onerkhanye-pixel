<!DOCTYPE html>
<html lang="kk">
<head>
<meta charset="UTF-8">
<title>–°–æ“£“ì—ã –æ–π—ã–Ω</title>
<style>
body {
    height: 100vh;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: sans-serif;
    background: #1cb295;
}

.guesstheword {
    height: auto;
    border-radius: 5px;
    background: white;
    min-width: 20em;
    padding: 1em;
}

.title {
    position: relative;
    margin-bottom: 1em;
    font-weight: bold;
    font-size: 1.2em;
}

.title::after {
    position: absolute;
    content: "";
    width: 100%;
    height: 1px;
    background: grey;
    bottom: 0;
    left: 0;
}

.container {
    padding: 1em 0;
}

.inputs {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 0.8em;
    margin-bottom: 1em;
}

.letter {
    height: 2em;
    width: 1.5em;
    outline: none;
    text-align: center;
    font-size: 1.4em;
    text-transform: uppercase;
}

.indicators {
    font-size: 0.9em;
}

.actions {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5em;
}

button {
    color: white;
    border-radius: 5px;
    border: 0;
    cursor: pointer;
    width: 16em;
    height: 3em;
    outline: none;
}

.submit {
    background: #1cb295;
}

.reset {
    background: red;
}

#goFinal {
    background: #ffae00;
    display: none; /* –±–∞—Å—Ç–∞–ø –∫”©—Ä—ñ–Ω–±–µ–π–¥—ñ */
}

#customWordContainer {
    margin-bottom: 1em;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 0.5em;
}
#customWordInput {
    padding: 5px;
    font-size: 1em;
}
</style>
</head>
<body>
<div class="guesstheword">

    <header class="title">
        <h1>–°–µ–≤–∞–Ω –†–∞–±–¥–∞–Ω“ì–∞ “õ–∞—Ä—Å—ã —Å–æ“£“ì—ã –æ–π—ã–Ω</h1> 
        <p>(–∂–∞–Ω—ã–Ω–¥–∞ –æ—Ç—ã—Ä“ì–∞–Ω –∞–¥–∞–º —Å–∞“ì–∞–Ω —Å”©–∑ –∂“±–º–±–∞“õ “õ“±—Ä—Å—ã–Ω!)</p>
        <p>(let the guy near you make a word, and you'll guess it!)</p>
    </header>

    <!-- Custom word input -->
    <div id="customWordContainer">
        <input type="text" id="customWordInput" placeholder="Write your word here">
        <button id="startGameBtn" class="submit">Start Game</button>
    </div>

    <form class="container">
        <div class="inputs"></div>
        <div class="indicators">
            <p class="remaining">
                Remaining guesses: <span class="rem-val">5</span>
            </p>
            <p class="wrong">
                Wrong letters: <span class="wr-val"></span>
            </p>
        </div>
        <div class="actions">
            <button class="submit" type="button" id="submitGuessBtn">Submit Guess</button>
            <button class="reset" type="button" id="resetBtn">Reset Game</button>
        </div>
    </form>

</div>

<!-- FINAL BUTTON -->
<button type="button" id="goFinal" style="display:none; background:#ffae00; margin-top:10px; width:16em; height:3em; border:none; border-radius:5px; cursor:pointer;">
    Go to Final Map
</button>

<script>
// –ë–∞—Ç—ã—Ä–º–∞–Ω—ã –±–∞—Å“õ–∞–Ω–¥–∞ —Å–æ“£“ì—ã –∫–∞—Ä—Ç–∞“ì–∞ ”©—Ç—É
const goFinalBtn = document.getElementById('goFinal');
goFinalBtn.addEventListener('click', () => {
    window.location.href = 'final_map.html'; // –º“±–Ω—ã ”©–∑ —Ñ–∞–π–ª—ã“£–∞ ”©–∑–≥–µ—Ä—Ç–µ –∞–ª–∞—Å—ã“£
});

// –û–π—ã–Ω —Å–æ“£—ã–Ω–¥–∞ –±–∞—Ç—ã—Ä–º–∞–Ω—ã –∫”©—Ä—Å–µ—Ç—É –º—ã—Å–∞–ª—ã:
// –ñ–µ“£–≥–µ–Ω–¥–µ –Ω–µ–º–µ—Å–µ –æ–π—ã–Ω –±—ñ—Ç–∫–µ–Ω–¥–µ:
function showFinalButton() {
    goFinalBtn.style.display = 'block';
}

// –ú—ã—Å–∞–ª—ã:
if(gameWon || gameOver) { // ”©–∑ –ª–æ–≥–∏–∫–∞“£–∞ “õ–∞—Ä–∞–π gameWon/gameOver —à–∞—Ä—Ç—ã–Ω “õ–æ–π
    showFinalButton();
}
</script>

<script>
let secretWord = '';
let remainingGuesses = 5;
let wrongLetters = [];
let currentGuess = [];
const inputsContainer = document.querySelector('.inputs');
const remVal = document.querySelector('.rem-val');
const wrVal = document.querySelector('.wr-val');

const customWordInput = document.getElementById('customWordInput');
const startGameBtn = document.getElementById('startGameBtn');
const submitGuessBtn = document.getElementById('submitGuessBtn');
const resetBtn = document.getElementById('resetBtn');

function setupInputs() {
    inputsContainer.innerHTML = '';
    currentGuess = Array(secretWord.length).fill('');
    for(let i=0; i<secretWord.length; i++){
        const input = document.createElement('input');
        input.classList.add('letter');
        input.setAttribute('maxlength','1');
        input.addEventListener('input', (e)=>{
            currentGuess[i] = e.target.value.toUpperCase();
        });
        inputsContainer.appendChild(input);
    }
    remVal.textContent = remainingGuesses;
    wrVal.textContent = wrongLetters.join(', ');
}

// Start game with custom word
startGameBtn.addEventListener('click', ()=>{
    const word = customWordInput.value.trim();
    if(word.length<1) return alert('Write a word!');
    secretWord = word.toUpperCase();
    remainingGuesses = 5;
    wrongLetters = [];
    document.getElementById('customWordContainer').style.display = 'none';
    setupInputs();
    goFinalBtn.style.display = 'none';
});

// Submit guess
submitGuessBtn.addEventListener('click', ()=>{
    const guessWord = currentGuess.join('');
    if(guessWord.length !== secretWord.length) return alert('–ë–∞—Ä–ª—ã“õ ”ô—Ä—ñ–ø—Ç–µ—Ä–¥—ñ —Ç–æ–ª—Ç—ã—Ä!');
    if(guessWord === secretWord){
        alert('üéâ –î“±—Ä—ã—Å! üéâ');
        goFinalBtn.style.display='block'; // –∂–µ“£–≥–µ–Ω–¥–µ –±–∞—Ç—ã—Ä–º–∞ —à—ã“ì–∞–¥—ã
        return;
    } else {
        remainingGuesses--;
        remVal.textContent = remainingGuesses;
        // Add wrong letters
        guessWord.split('').forEach((l, i)=>{
            if(l !== secretWord[i] && !wrongLetters.includes(l)){
                wrongLetters.push(l);
            }
        });
        wrVal.textContent = wrongLetters.join(', ');
    }
    if(remainingGuesses<=0){
        alert('Game over! The word was: ' + secretWord);
        goFinalBtn.style.display='block';
    }
});

// Reset game
resetBtn.addEventListener('click', ()=>{
    secretWord = '';
    remainingGuesses = 5;
    wrongLetters = [];
    currentGuess = [];
    inputsContainer.innerHTML = '';
    wrVal.textContent = '';
    remVal.textContent = remainingGuesses;
    document.getElementById('customWordContainer').style.display = 'flex';
    customWordInput.value = '';
});
goFinalBtn.addEventListener('click', ()=>{
    window.location.href = 'final.html';
});
</script>

</body>
</html>
